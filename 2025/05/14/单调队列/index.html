<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="简单记录一些笔记"><title>单调队列 | Disda</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><meta name="generator" content="Hexo 6.0.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">单调队列</h1><a id="logo" href="/.">Disda</a><p class="description">Disda’s Blog</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">单调队列</h1><div class="post-meta">2025-05-14<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><span id="more"></span>

<!-- toc -->

<ul>
<li><a href="#239-sliding-window-maximum">239. Sliding Window Maximum</a><ul>
<li><a href="#%E6%9A%B4%E5%8A%9B%E7%A0%B4%E8%A7%A3">暴力破解</a></li>
<li><a href="#%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97%E5%A0%86">优先队列&#x2F;堆</a></li>
<li><a href="#%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97">单调队列</a></li>
<li><a href="#%E7%BA%BF%E6%AE%B5%E6%A0%91">线段树</a></li>
<li><a href="#%E7%A8%80%E7%96%8F%E8%A1%A8">稀疏表</a></li>
<li><a href="#%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92">动态规划</a></li>
</ul>
</li>
<li><a href="#2373-largest-local-values-in-a-matrix">2373 Largest Local Values in a Matrix</a><ul>
<li><a href="#%E6%9A%B4%E5%8A%9B">暴力</a></li>
<li><a href="#%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97-1">单调队列</a></li>
</ul>
</li>
<li><a href="#2444-count-subarrays-with-fixed-bounds">2444. Count Subarrays With Fixed Bounds</a><ul>
<li><a href="#%E6%9A%B4%E5%8A%9B-1">暴力</a></li>
<li><a href="#%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97-2">单调队列</a></li>
<li><a href="#%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3">滑动窗口</a></li>
</ul>
</li>
<li><a href="#2762-continuous-subarrays">2762. Continuous Subarrays</a><ul>
<li><a href="#%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88">有序集合</a></li>
<li><a href="#%E5%A0%86">堆</a></li>
<li><a href="#%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97-3">单调队列</a></li>
</ul>
</li>
<li><a href="#1438longest-continuous-subarray-with-absolute-diff-less-than-or-equal-to-limit">1438.Longest Continuous Subarray With Absolute Diff Less Than or Equal to Limit</a><ul>
<li><a href="#%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97-4">单调队列</a></li>
</ul>
</li>
<li><a href="#1425-constrained-subsequence-sum">1425. Constrained Subsequence Sum</a><ul>
<li><a href="#%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-oot">动态规划 oot</a></li>
<li><a href="#%E5%8D%95%E8%B0%83%E6%A0%88%E4%BC%98%E5%8C%96dp">单调栈优化DP</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h2><span id="239-sliding-window-maximum">239. Sliding Window Maximum</span></h2><p>You are given an array of integers <code>nums</code>, there is a sliding window of size <code>k</code> which is moving from the very left of the array to the very right. You can only see the <code>k</code> numbers in the window. Each time the sliding window moves right by one position.</p>
<p>Return <em>the max sliding window</em>. </p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [1,3,-1,-3,5,3,6,7], k = 3</span><br><span class="line">Output: [3,3,5,5,6,7]</span><br><span class="line">Explanation: </span><br><span class="line">Window position                Max</span><br><span class="line">---------------               -----</span><br><span class="line">[1  3  -1] -3  5  3  6  7       3</span><br><span class="line"> 1 [3  -1  -3] 5  3  6  7       3</span><br><span class="line"> 1  3 [-1  -3  5] 3  6  7       5</span><br><span class="line"> 1  3  -1 [-3  5  3] 6  7       5</span><br><span class="line"> 1  3  -1  -3 [5  3  6] 7       6</span><br><span class="line"> 1  3  -1  -3  5 [3  6  7]      7</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [1], k = 1</span><br><span class="line">Output: [1]</span><br></pre></td></tr></table></figure>

<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 105</code></li>
<li><code>-104 &lt;= nums[i] &lt;= 104</code></li>
<li><code>1 &lt;= k &lt;= nums.length</code></li>
</ul>
<h3><span id="暴力破解">暴力破解</span></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">maxSlidingWindow</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">    res = []  <span class="comment"># 存储每个窗口的最大值</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 遍历所有可能的窗口（窗口的右边界从 k-1 开始，直到数组末尾）</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(k-<span class="number">1</span>, <span class="built_in">len</span>(nums)):</span><br><span class="line">        j = i - k + <span class="number">1</span>  <span class="comment"># 计算当前窗口的左边界 j</span></span><br><span class="line">        </span><br><span class="line">        max_val = nums[j]  <span class="comment"># 初始化当前窗口的最大值为窗口的第一个元素</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 遍历窗口内的所有元素，寻找最大值</span></span><br><span class="line">        <span class="keyword">for</span> l <span class="keyword">in</span> <span class="built_in">range</span>(j, i+<span class="number">1</span>):</span><br><span class="line">            max_val = <span class="built_in">max</span>(max_val, nums[l])  <span class="comment"># 更新最大值</span></span><br><span class="line">        </span><br><span class="line">        res.append(max_val)  <span class="comment"># 将当前窗口的最大值加入结果列表</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> res  <span class="comment"># 返回所有窗口的最大值</span></span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> <code>O(Nk)</code><br><strong>Space:</strong> <code>O(1)</code> not including the output array</p>
<h3><span id="优先队列x2f堆">优先队列&#x2F;堆</span></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">maxSlidingWindow</span>(<span class="params">nums, k</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line">    </span><br><span class="line">    res = []</span><br><span class="line">    max_heap = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i, num <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br><span class="line">        <span class="comment"># 将当前元素推入堆（Python 默认最小堆，用负数模拟最大堆）</span></span><br><span class="line">        heapq.heappush(max_heap, (-num, i))</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 当窗口形成后（i &gt;= k-1），开始计算窗口最大值</span></span><br><span class="line">        <span class="keyword">if</span> i &gt;= k - <span class="number">1</span>:</span><br><span class="line">            <span class="comment"># 移除堆顶中超出窗口范围的元素（延迟删除）</span></span><br><span class="line">            <span class="keyword">while</span> max_heap[<span class="number">0</span>][<span class="number">1</span>] &lt;= i - k:</span><br><span class="line">                heapq.heappop(max_heap)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 当前堆顶元素（取负数还原）即为窗口最大值</span></span><br><span class="line">            res.append(-max_heap[<span class="number">0</span>][<span class="number">0</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> <code>O(Nk)</code> (if we implement PQ by ourselves, it is <code>O(N\log&#123;k&#125;)</code>)<br><strong>Space:</strong> <code>O(k)</code></p>
<h3><span id="单调队列">单调队列</span></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">maxSlidingWindow</span>(<span class="params">nums, k</span>):</span><br><span class="line">    res = []</span><br><span class="line">    que = deque()  <span class="comment"># 存储索引，保证 nums[que[i]] 单调递减</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):</span><br><span class="line">        <span class="comment"># 移除比当前元素小的所有元素（它们不可能是最大值）</span></span><br><span class="line">        <span class="keyword">while</span> que <span class="keyword">and</span> nums[i] &gt;= nums[que[-<span class="number">1</span>]]:</span><br><span class="line">            que.pop()</span><br><span class="line">        que.append(i)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 移除超出窗口范围的元素</span></span><br><span class="line">        <span class="keyword">if</span> que[<span class="number">0</span>] == i - k:</span><br><span class="line">            que.popleft()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 当窗口形成后（i &gt;= k-1），记录最大值</span></span><br><span class="line">        <span class="keyword">if</span> i &gt;= k - <span class="number">1</span>:</span><br><span class="line">            res.append(nums[que[<span class="number">0</span>]])</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> <code>O(N)</code> since each element is processed (add&#x2F;remove) at most twice.<br><strong>Space:</strong> <code>O(k)</code></p>
<h3><span id="线段树">线段树</span></h3><p>线段树是一棵<strong>完全二叉树</strong>（所有叶子节点都在最底层），每个节点存储一个区间的统计信息（如最大值、最小值、和等）。</p>
<p><strong>示例：数组 <code>[1, 3, -1, -3]</code> 的线段树（求最大值）</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">            [0,3] max=3</span><br><span class="line">           /       \</span><br><span class="line">    [0,1] max=3    [2,3] max=-1</span><br><span class="line">     /    \         /    \</span><br><span class="line">[0] max=1 [1] max=3 [2] max=-1 [3] max=-3</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>叶子节点</strong>：存储单个元素（如 <code>[0]</code> 存 <code>1</code>）</li>
<li><strong>非叶子节点</strong>：存储子区间的最大值（如 <code>[0,1]</code> 存 <code>max(1,3)=3</code>）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SegmentTree</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, data</span>):</span><br><span class="line">        self.n = <span class="built_in">len</span>(data)</span><br><span class="line">        self.size = <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> self.size &lt; self.n:</span><br><span class="line">            self.size &lt;&lt;= <span class="number">1</span>  <span class="comment"># 最小 2 的幂 &gt;=n</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 分配 2*size 的数组（实际用 2n-1 个节点，多出的空间不用）</span></span><br><span class="line">        self.tree = [<span class="built_in">float</span>(<span class="string">&#x27;-inf&#x27;</span>)] * (<span class="number">2</span> * self.size)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 填充叶子节点（位置 size 到 size+n-1）</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(self.n):</span><br><span class="line">            self.tree[self.size + i] = data[i]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 自底向上计算内部节点（位置 1 到 size-1）</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(self.size - <span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">            self.tree[i] = <span class="built_in">max</span>(self.tree[<span class="number">2</span> * i], self.tree[<span class="number">2</span> * i + <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">query</span>(<span class="params">self, l, r</span>):</span><br><span class="line">        res = <span class="built_in">float</span>(<span class="string">&#x27;-inf&#x27;</span>)</span><br><span class="line">        l += self.size  <span class="comment"># 定位到叶子节点</span></span><br><span class="line">        r += self.size</span><br><span class="line">        <span class="keyword">while</span> l &lt;= r:</span><br><span class="line">            <span class="keyword">if</span> l % <span class="number">2</span> == <span class="number">1</span>:  <span class="comment"># 左边界是右孩子，单独处理</span></span><br><span class="line">                res = <span class="built_in">max</span>(res, self.tree[l])</span><br><span class="line">                l += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> r % <span class="number">2</span> == <span class="number">0</span>:  <span class="comment"># 右边界是左孩子，单独处理</span></span><br><span class="line">                res = <span class="built_in">max</span>(res, self.tree[r])</span><br><span class="line">                r -= <span class="number">1</span></span><br><span class="line">            l //= <span class="number">2</span>  <span class="comment"># 移动到父节点</span></span><br><span class="line">            r //= <span class="number">2</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update</span>(<span class="params">self, i, value</span>):</span><br><span class="line">        i += self.size  <span class="comment"># 找到叶子节点</span></span><br><span class="line">        self.tree[i] = value</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 向上更新父节点</span></span><br><span class="line">        <span class="keyword">while</span> i &gt; <span class="number">1</span>:</span><br><span class="line">            i //= <span class="number">2</span></span><br><span class="line">            self.tree[i] = <span class="built_in">max</span>(self.tree[<span class="number">2</span> * i], self.tree[<span class="number">2</span> * i + <span class="number">1</span>])</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxSlidingWindow</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        </span><br><span class="line">        st = SegmentTree(nums)</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums) - k + <span class="number">1</span>):</span><br><span class="line">            res.append(st.query(i, i + k - <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> <code>O(NlogN)</code><br><strong>Space:</strong> <code>O(NlogN)</code></p>
<h3><span id="稀疏表">稀疏表</span></h3><p><strong>定义稀疏表 <code>st</code></strong></p>
<ul>
<li><p><code>st[j][i]</code> 表示从位置 <code>i</code> 开始，长度为 2^j的区间的最值。</p>
</li>
<li><p>例如：</p>
<ul>
<li><code>st[0][i] = nums[i]</code>（长度为 20&#x3D;120&#x3D;1 的区间就是元素本身）。</li>
<li><code>st[1][i] = max(nums[i], nums[i+1])</code>（长度为 21&#x3D;221&#x3D;2 的区间）。</li>
<li><code>st[2][i] = max(nums[i], nums[i+1], nums[i+2], nums[i+3])</code>（长度为 2^2&#x3D;4 的区间）</li>
</ul>
<p>稀疏表的预处理通过动态规划（DP）完成：</p>
<p><code>st[j][i]=max(st[j−1][i],st[j−1][i+2j−1])</code></p>
<p>即：区间 <code>[i, i+2^j-1]</code> 的最值 &#x3D; 左半区间 <code>[i, i+2^&#123;j-1&#125;-1]</code> 和右半区间 <code>[i+2^&#123;j-1&#125;, i+2^j-1]</code> 的最值的较大者。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SparseTable</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, nums</span>):</span><br><span class="line">        self.n = <span class="built_in">len</span>(nums)</span><br><span class="line">        self.k = math.floor(math.log2(self.n)) + <span class="number">1</span> <span class="keyword">if</span> self.n &gt; <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">        self.st = [[<span class="number">0</span>] * self.k <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(self.n)]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 初始化</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(self.n):</span><br><span class="line">            self.st[i][<span class="number">0</span>] = nums[i]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 动态规划预处理</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, self.k):</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(self.n - (<span class="number">1</span> &lt;&lt; j) + <span class="number">1</span>):</span><br><span class="line">                self.st[i][j] = <span class="built_in">max</span>(self.st[i][j-<span class="number">1</span>], self.st[i + (<span class="number">1</span> &lt;&lt; (j-<span class="number">1</span>))][j-<span class="number">1</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">query</span>(<span class="params">self, l, r</span>):</span><br><span class="line">        length = r - l + <span class="number">1</span></span><br><span class="line">        k = math.floor(math.log2(length))</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(self.st[l][k], self.st[r - (<span class="number">1</span> &lt;&lt; k) + <span class="number">1</span>][k])</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">maxSlidingWindow</span>(<span class="params">nums, k</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line">    </span><br><span class="line">    st = SparseTable(nums)</span><br><span class="line">    res = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums) - k + <span class="number">1</span>):</span><br><span class="line">        res.append(st.query(i, i + k - <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> <code>O(NlogN)</code><br><strong>Space:</strong> <code>O(N)</code></p>
<h3><span id="动态规划">动态规划</span></h3><p><img src="https://bloggg-1254259681.cos.na-siliconvalley.myqcloud.com/4hlzv.jpg" alt="img"></p>
<p>动态规划解法将数组分成若干块，预处理每个块从左到右和从右到左的最大值，然后组合结果。</p>
<p><strong>分块预处理</strong>：</p>
<ul>
<li><code>left_max[i]</code>：从当前块的起始位置到 <code>i</code> 的最大值。</li>
<li><code>right_max[i]</code>：从 <code>i</code> 到当前块结束位置的最大值。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">maxSlidingWindow</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        n = <span class="built_in">len</span>(nums)</span><br><span class="line">        left_max = [<span class="number">0</span>] * n</span><br><span class="line">        right_max = [<span class="number">0</span>] * n</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            j = n-<span class="number">1</span>-i</span><br><span class="line">            <span class="comment"># 从左到右计算块内最大值</span></span><br><span class="line">            <span class="keyword">if</span> i % k == <span class="number">0</span>:</span><br><span class="line">                left_max[i] = nums[i]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                left_max[i] = <span class="built_in">max</span>(left_max[i-<span class="number">1</span>], nums[i])</span><br><span class="line">            <span class="comment"># 从右到左计算块内最大值</span></span><br><span class="line">            <span class="keyword">if</span> j == n - <span class="number">1</span> <span class="keyword">or</span> (j + <span class="number">1</span>) % k == <span class="number">0</span>:</span><br><span class="line">                right_max[j] = nums[j]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                right_max[j] = <span class="built_in">max</span>(right_max[j+<span class="number">1</span>], nums[j])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 计算每个窗口的最大值</span></span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n - k + <span class="number">1</span>):</span><br><span class="line">            j = i + k - <span class="number">1</span></span><br><span class="line">            res.append(<span class="built_in">max</span>(right_max[i], left_max[j]))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> <code>O(N)</code><br><strong>Space:</strong> <code>O(N)</code></p>
<h2><span id="2373-largest-local-values-in-a-matrix">2373 Largest Local Values in a Matrix</span></h2><p>You are given an <code>n x n</code> integer matrix <code>grid</code>.</p>
<p>Generate an integer matrix <code>maxLocal</code> of size <code>(n - 2) x (n - 2)</code> such that:</p>
<ul>
<li><code>maxLocal[i][j]</code> is equal to the <strong>largest</strong> value of the <code>3 x 3</code> matrix in <code>grid</code> centered around row <code>i + 1</code> and column <code>j + 1</code>.</li>
</ul>
<p>In other words, we want to find the largest value in every contiguous <code>3 x 3</code> matrix in <code>grid</code>.</p>
<p>Return <em>the generated matrix</em>. </p>
<p><strong>Example 1:</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2022/06/21/ex1.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Input: grid = [[9,9,8,1],[5,6,2,6],[8,2,6,4],[6,2,2,2]]</span><br><span class="line">Output: [[9,9],[8,6]]</span><br><span class="line">Explanation: The diagram above shows the original matrix and the generated matrix.</span><br><span class="line">Notice that each value in the generated matrix corresponds to the largest value of a contiguous 3 x 3 matrix in grid.</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<p><img src="https://assets.leetcode.com/uploads/2022/07/02/ex2new2.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: grid = [[1,1,1,1,1],[1,1,1,1,1],[1,1,2,1,1],[1,1,1,1,1],[1,1,1,1,1]]</span><br><span class="line">Output: [[2,2,2],[2,2,2],[2,2,2]]</span><br><span class="line">Explanation: Notice that the 2 is contained within every contiguous 3 x 3 matrix in grid.</span><br></pre></td></tr></table></figure>

<p> <strong>Constraints:</strong></p>
<ul>
<li><code>n == grid.length == grid[i].length</code></li>
<li><code>3 &lt;= n &lt;= 100</code></li>
<li><code>1 &lt;= grid[i][j] &lt;= 100</code></li>
</ul>
<h3><span id="暴力">暴力</span></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">cal_max</span>(<span class="params">self,grid,x,y</span>):</span><br><span class="line">    mx=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(x,x+<span class="number">3</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(y,y+<span class="number">3</span>):</span><br><span class="line">            mx = <span class="built_in">max</span>(mx,grid[i][j])</span><br><span class="line">    <span class="keyword">return</span> mx</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">largestLocal</span>(<span class="params">self, grid: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">    N = <span class="built_in">len</span>(grid)</span><br><span class="line">    res = [[<span class="number">0</span>]*(N-<span class="number">2</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(N-<span class="number">2</span>)]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(N-<span class="number">2</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(N-<span class="number">2</span>):</span><br><span class="line">            res[i][j] = self.cal_max(grid,i,j)</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>






<h3><span id="单调队列">单调队列</span></h3><p><img src="https://pic.leetcode.cn/1677636370-JBXjLk-image.png" alt="image.png"></p>
<p><img src="https://pic.leetcode.cn/1677640407-yLVAzE-image.png" alt="image.png"></p>
<p><img src="https://pic.leetcode.cn/1677641863-roadCf-image.png" alt="image.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">largestLocal</span>(<span class="params">self, grid: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span><br><span class="line">        n = <span class="built_in">len</span>(grid)</span><br><span class="line">        res = [[<span class="number">0</span>]*(n-<span class="number">2</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n-<span class="number">2</span>)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            que = deque()</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">                <span class="keyword">while</span> <span class="built_in">len</span>(que)!=<span class="number">0</span> <span class="keyword">and</span> grid[i][j]&gt;grid[i][que[-<span class="number">1</span>]]:</span><br><span class="line">                    que.pop()</span><br><span class="line">                que.append(j)</span><br><span class="line">                <span class="keyword">if</span> j&gt;=<span class="number">2</span>:</span><br><span class="line">                    val = grid[i][que[<span class="number">0</span>]]</span><br><span class="line">                    <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(i-<span class="number">2</span>,i+<span class="number">1</span>):</span><br><span class="line">                        <span class="keyword">if</span> k &gt;= <span class="number">0</span> <span class="keyword">and</span> k &lt; n - <span class="number">2</span>:</span><br><span class="line">                            res[k][j-<span class="number">2</span>] = <span class="built_in">max</span>(res[k][j-<span class="number">2</span>],val)</span><br><span class="line">                    <span class="keyword">if</span> que[<span class="number">0</span>] &lt;= j-<span class="number">2</span>:</span><br><span class="line">                        que.popleft()</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>

<h2><span id="2444-count-subarrays-with-fixed-bounds">2444. Count Subarrays With Fixed Bounds</span></h2><p>Hint</p>
<p>You are given an integer array <code>nums</code> and two integers <code>minK</code> and <code>maxK</code>.</p>
<p>A <strong>fixed-bound subarray</strong> of <code>nums</code> is a subarray that satisfies the following conditions:</p>
<ul>
<li>The <strong>minimum</strong> value in the subarray is equal to <code>minK</code>.</li>
<li>The <strong>maximum</strong> value in the subarray is equal to <code>maxK</code>.</li>
</ul>
<p>Return <em>the <strong>number</strong> of fixed-bound subarrays</em>.</p>
<p>A <strong>subarray</strong> is a <strong>contiguous</strong> part of an array. </p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [1,3,5,2,7,5], minK = 1, maxK = 5</span><br><span class="line">Output: 2</span><br><span class="line">Explanation: The fixed-bound subarrays are [1,3,5] and [1,3,5,2].</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [1,1,1,1], minK = 1, maxK = 1</span><br><span class="line">Output: 10</span><br><span class="line">Explanation: Every subarray of nums is a fixed-bound subarray. There are 10 possible subarrays.</span><br></pre></td></tr></table></figure>

<p> <strong>Constraints:</strong></p>
<ul>
<li><code>2 &lt;= nums.length &lt;= 105</code></li>
<li><code>1 &lt;= nums[i], minK, maxK &lt;= 106</code></li>
</ul>
<h3><span id="暴力">暴力</span></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">countSubarrays</span>(<span class="params">self, nums, minK, maxK</span>):</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):</span><br><span class="line">        mini = <span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)</span><br><span class="line">        maxi = <span class="built_in">float</span>(<span class="string">&#x27;-inf&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i, <span class="built_in">len</span>(nums)):</span><br><span class="line">            mini = <span class="built_in">min</span>(mini, nums[j])</span><br><span class="line">            maxi = <span class="built_in">max</span>(maxi, nums[j])</span><br><span class="line">            <span class="keyword">if</span> mini == minK <span class="keyword">and</span> maxi == maxK:</span><br><span class="line">                count += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> count</span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> <code>O(N^2)</code> </p>
<p><strong>Space:</strong> <code>O(1)</code></p>
<h3><span id="单调队列">单调队列</span></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">countSubarrays</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], minK: <span class="built_in">int</span>, maxK: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line">        left = <span class="number">0</span></span><br><span class="line">        q_min = deque()</span><br><span class="line">        q_max = deque()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> minK&lt;=nums[i]&lt;=maxK:</span><br><span class="line">                q_min.clear()</span><br><span class="line">                q_max.clear()</span><br><span class="line">                left = i+<span class="number">1</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">while</span> q_max <span class="keyword">and</span> nums[i]&gt;=nums[q_max[-<span class="number">1</span>]]:</span><br><span class="line">                q_max.pop()</span><br><span class="line">            q_max.append(i)</span><br><span class="line">            <span class="keyword">while</span> q_min <span class="keyword">and</span> nums[i]&lt;=nums[q_min[-<span class="number">1</span>]]:</span><br><span class="line">                q_min.pop()</span><br><span class="line">            q_min.append(i)</span><br><span class="line">            <span class="keyword">if</span> nums[q_min[<span class="number">0</span>]] == minK <span class="keyword">and</span> nums[q_max[<span class="number">0</span>]] == maxK:</span><br><span class="line">                res+=<span class="built_in">min</span>(q_min[<span class="number">0</span>],q_max[<span class="number">0</span>])-left+<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> <code>O(N)</code><br><strong>Space:</strong> <code>O(N)</code></p>
<h3><span id="滑动窗口">滑动窗口</span></h3><p>感觉像单调队列的一种特殊情况</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">countSubarrays</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], minK: <span class="built_in">int</span>, maxK: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">    res = <span class="number">0</span></span><br><span class="line">    jbad = jmax = jmin = -<span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i,a <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br><span class="line">        <span class="keyword">if</span> a &gt; maxK <span class="keyword">or</span> a &lt; minK: jbad=i //<span class="keyword">if</span> <span class="keyword">not</span> minK&lt;=a&lt;=maxK</span><br><span class="line">        <span class="keyword">if</span> a == minK: jmin = i</span><br><span class="line">        <span class="keyword">if</span> a == maxK: jmax = i</span><br><span class="line">        res += <span class="built_in">max</span>(<span class="number">0</span>,<span class="built_in">min</span>(jmax,jmin)-jbad)</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> <code>O(N)</code><br><strong>Space:</strong> <code>O(1)</code></p>
<h2><span id="2762-continuous-subarrays">2762. Continuous Subarrays</span></h2><p>You are given a <strong>0-indexed</strong> integer array <code>nums</code>. A subarray of <code>nums</code> is called <strong>continuous</strong> if:</p>
<ul>
<li>Let <code>i</code>, <code>i + 1</code>, …, <code>j</code> be the indices in the subarray. Then, for each pair of indices <code>i &lt;= i1, i2 &lt;= j</code>, <code>0 &lt;= |nums[i1] - nums[i2]| &lt;= 2</code>.</li>
</ul>
<p>Return <em>the total number of <strong>continuous</strong> subarrays.</em></p>
<p>A subarray is a contiguous <strong>non-empty</strong> sequence of elements within an array.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [5,4,2,4]</span><br><span class="line">Output: 8</span><br><span class="line">Explanation: </span><br><span class="line">Continuous subarray of size 1: [5], [4], [2], [4].</span><br><span class="line">Continuous subarray of size 2: [5,4], [4,2], [2,4].</span><br><span class="line">Continuous subarray of size 3: [4,2,4].</span><br><span class="line">There are no subarrys of size 4.</span><br><span class="line">Total continuous subarrays = 4 + 3 + 1 = 8.</span><br><span class="line">It can be shown that there are no more continuous subarrays.</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [1,2,3]</span><br><span class="line">Output: 6</span><br><span class="line">Explanation: </span><br><span class="line">Continuous subarray of size 1: [1], [2], [3].</span><br><span class="line">Continuous subarray of size 2: [1,2], [2,3].</span><br><span class="line">Continuous subarray of size 3: [1,2,3].</span><br><span class="line">Total continuous subarrays = 3 + 2 + 1 = 6.</span><br></pre></td></tr></table></figure>

<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 105</code></li>
<li><code>1 &lt;= nums[i] &lt;= 109</code></li>
</ul>
<h3><span id="有序集合">有序集合</span></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">continuousSubarrays</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">       ans = left = <span class="number">0</span></span><br><span class="line">       cnt = Counter()</span><br><span class="line">       <span class="keyword">for</span> right, x <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br><span class="line">           cnt[x] += <span class="number">1</span></span><br><span class="line">           <span class="keyword">while</span> <span class="built_in">max</span>(cnt) - <span class="built_in">min</span>(cnt) &gt; <span class="number">2</span>:</span><br><span class="line">               y = nums[left]</span><br><span class="line">               cnt[y] -= <span class="number">1</span></span><br><span class="line">               <span class="keyword">if</span> cnt[y] == <span class="number">0</span>:</span><br><span class="line">                   <span class="keyword">del</span> cnt[y]</span><br><span class="line">               left += <span class="number">1</span></span><br><span class="line">           ans += right - left + <span class="number">1</span></span><br><span class="line">       <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> <code>O(Nlogk)</code> </p>
<p><strong>Space:</strong> <code>O(K)</code></p>
<h3><span id="堆">堆</span></h3><p>原理和单调队列差不多，但是单调队列自维护了单调递增、递减的顺序，因此效率率低于单调队列</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">continuousSubarrays</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line">        left = <span class="number">0</span></span><br><span class="line">        max_heap = []</span><br><span class="line">        min_heap = []</span><br><span class="line">        <span class="keyword">for</span> right,num <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br><span class="line">            heapq.heappush(max_heap,(-num,right))</span><br><span class="line">            heapq.heappush(min_heap,(num,right))</span><br><span class="line">            <span class="keyword">while</span> left &lt;= right <span class="keyword">and</span> -max_heap[<span class="number">0</span>][<span class="number">0</span>] - min_heap[<span class="number">0</span>][<span class="number">0</span>] &gt; <span class="number">2</span>:</span><br><span class="line">                <span class="keyword">while</span> max_heap <span class="keyword">and</span> max_heap[<span class="number">0</span>][<span class="number">1</span>] &lt;= left:</span><br><span class="line">                        heapq.heappop(max_heap)</span><br><span class="line">                <span class="keyword">while</span> min_heap <span class="keyword">and</span> min_heap[<span class="number">0</span>][<span class="number">1</span>] &lt;= left:</span><br><span class="line">                    heapq.heappop(min_heap)</span><br><span class="line">                left+=<span class="number">1</span></span><br><span class="line">                </span><br><span class="line">            res+=right-left+<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">        </span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> <code>O(NlogN)</code><br><strong>Space:</strong> <code>O(N)</code></p>
<h3><span id="单调队列">单调队列</span></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">continuousSubarrays</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line">        left = <span class="number">0</span>  <span class="comment"># 窗口左边界</span></span><br><span class="line">        q_min = deque()  <span class="comment"># 单调递增队列，维护最小值</span></span><br><span class="line">        q_max = deque()  <span class="comment"># 单调递减队列，维护最大值</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):</span><br><span class="line">            <span class="comment"># 维护 q_max（单调递减）</span></span><br><span class="line">            <span class="keyword">while</span> q_max <span class="keyword">and</span> nums[i] &gt; nums[q_max[-<span class="number">1</span>]]:</span><br><span class="line">                q_max.pop()</span><br><span class="line">            q_max.append(i)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 维护 q_min（单调递增）</span></span><br><span class="line">            <span class="keyword">while</span> q_min <span class="keyword">and</span> nums[i] &lt; nums[q_min[-<span class="number">1</span>]]:</span><br><span class="line">                q_min.pop()</span><br><span class="line">            q_min.append(i)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 如果当前窗口的 max - min &gt; 2，移动左边界 left</span></span><br><span class="line">            <span class="keyword">while</span> nums[q_max[<span class="number">0</span>]] - nums[q_min[<span class="number">0</span>]] &gt; <span class="number">2</span>:</span><br><span class="line">                <span class="keyword">if</span> q_max[<span class="number">0</span>] == left:</span><br><span class="line">                    q_max.popleft()</span><br><span class="line">                <span class="keyword">if</span> q_min[<span class="number">0</span>] == left:</span><br><span class="line">                    q_min.popleft()</span><br><span class="line">                left += <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 以 nums[i] 结尾的满足条件的子数组数量 = i - left + 1</span></span><br><span class="line">            res += i - left + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>

<p><strong>Time:</strong> <code>O(N)</code><br><strong>Space:</strong> <code>O(N)</code></p>
<h2><span id="1438longest-continuous-subarray-with-absolute-diff-less-than-or-equal-to-limit">1438.Longest Continuous Subarray With Absolute Diff Less Than or Equal to Limit</span></h2><p>Given an array of integers <code>nums</code> and an integer <code>limit</code>, return the size of the longest <strong>non-empty</strong> subarray such that the absolute difference between any two elements of this subarray is less than or equal to <code>limit</code><em>.</em></p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [8,2,4,7], limit = 4</span><br><span class="line">Output: 2 </span><br><span class="line">Explanation: All subarrays are: </span><br><span class="line">[8] with maximum absolute diff |8-8| = 0 &lt;= 4.</span><br><span class="line">[8,2] with maximum absolute diff |8-2| = 6 &gt; 4. </span><br><span class="line">[8,2,4] with maximum absolute diff |8-2| = 6 &gt; 4.</span><br><span class="line">[8,2,4,7] with maximum absolute diff |8-2| = 6 &gt; 4.</span><br><span class="line">[2] with maximum absolute diff |2-2| = 0 &lt;= 4.</span><br><span class="line">[2,4] with maximum absolute diff |2-4| = 2 &lt;= 4.</span><br><span class="line">[2,4,7] with maximum absolute diff |2-7| = 5 &gt; 4.</span><br><span class="line">[4] with maximum absolute diff |4-4| = 0 &lt;= 4.</span><br><span class="line">[4,7] with maximum absolute diff |4-7| = 3 &lt;= 4.</span><br><span class="line">[7] with maximum absolute diff |7-7| = 0 &lt;= 4. </span><br><span class="line">Therefore, the size of the longest subarray is 2.</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [10,1,2,4,7,2], limit = 5</span><br><span class="line">Output: 4 </span><br><span class="line">Explanation: The subarray [2,4,7,2] is the longest since the maximum absolute diff is |2-7| = 5 &lt;= 5.</span><br></pre></td></tr></table></figure>

<p><strong>Example 3:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [4,2,2,2,4,4,2,2], limit = 0</span><br><span class="line">Output: 3</span><br></pre></td></tr></table></figure>

<p><strong>Constraints:</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 105</code></li>
<li><code>1 &lt;= nums[i] &lt;= 109</code></li>
<li><code>0 &lt;= limit &lt;= 109</code></li>
</ul>
<h3><span id="单调队列">单调队列</span></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">longestSubarray</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], limit: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line">        q_max = deque()</span><br><span class="line">        q_min = deque()</span><br><span class="line">        left = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> right,num <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br><span class="line">            <span class="keyword">while</span> q_max <span class="keyword">and</span> num&gt;=nums[q_max[-<span class="number">1</span>]]:</span><br><span class="line">                q_max.pop()</span><br><span class="line">            q_max.append(right)</span><br><span class="line">            <span class="keyword">while</span> q_min <span class="keyword">and</span> num&lt;=nums[q_min[-<span class="number">1</span>]]:</span><br><span class="line">                q_min.pop()</span><br><span class="line">            q_min.append(right)</span><br><span class="line">            <span class="keyword">while</span> nums[q_max[<span class="number">0</span>]] - nums[q_min[<span class="number">0</span>]]&gt;limit:</span><br><span class="line">                left+=<span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> q_max[<span class="number">0</span>]&lt;left:</span><br><span class="line">                    q_max.popleft()</span><br><span class="line">                <span class="keyword">if</span> q_min[<span class="number">0</span>]&lt;left:</span><br><span class="line">                    q_min.popleft()</span><br><span class="line">            res=<span class="built_in">max</span>(res,right-left+<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>

<p>Time <code>O(N)</code><br>Space <code>O(N)</code></p>
<h2><span id="1425-constrained-subsequence-sum">1425. Constrained Subsequence Sum</span></h2><p>Given an integer array <code>nums</code> and an integer <code>k</code>, return the maximum sum of a <strong>non-empty</strong> subsequence of that array such that for every two <strong>consecutive</strong> integers in the subsequence, <code>nums[i]</code> and <code>nums[j]</code>, where <code>i &lt; j</code>, the condition <code>j - i &lt;= k</code> is satisfied.</p>
<p>A <em>subsequence</em> of an array is obtained by deleting some number of elements (can be zero) from the array, leaving the remaining elements in their original order. </p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [10,2,-10,5,20], k = 2</span><br><span class="line">Output: 37</span><br><span class="line">Explanation: The subsequence is [10, 2, 5, 20].</span><br></pre></td></tr></table></figure>

<p><strong>Example 2:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [-1,-2,-3], k = 1</span><br><span class="line">Output: -1</span><br><span class="line">Explanation: The subsequence must be non-empty, so we choose the largest number.</span><br></pre></td></tr></table></figure>

<p><strong>Example 3:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [10,-2,-10,-5,20], k = 2</span><br><span class="line">Output: 23</span><br><span class="line">Explanation: The subsequence is [10, -2, -5, 20].</span><br></pre></td></tr></table></figure>


<h3><span id="动态规划-oot">动态规划 oot</span></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">constrainedSubsetSum</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">    n = <span class="built_in">len</span>(nums)</span><br><span class="line">    dp = nums.copy()</span><br><span class="line">    res = dp[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n):</span><br><span class="line">        <span class="comment"># 取前k个元素中的最大值，确保不越界</span></span><br><span class="line">        start = <span class="built_in">max</span>(<span class="number">0</span>, i - k)</span><br><span class="line">        max_prev = <span class="built_in">max</span>(dp[start:i], default=<span class="number">0</span>)</span><br><span class="line">        dp[i] += <span class="built_in">max</span>(max_prev, <span class="number">0</span>)</span><br><span class="line">        res = <span class="built_in">max</span>(res, dp[i])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>

<h3><span id="单调栈优化dp">单调栈优化DP</span></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">constrainedSubsetSum</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">    dp = nums.copy()</span><br><span class="line">    q = deque()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):    </span><br><span class="line">        <span class="keyword">while</span> q <span class="keyword">and</span> q[<span class="number">0</span>]&lt;i-k:</span><br><span class="line">            q.popleft()</span><br><span class="line">        dp[i] += <span class="built_in">max</span>(<span class="number">0</span>,dp[q[<span class="number">0</span>]] <span class="keyword">if</span> q <span class="keyword">else</span> <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">while</span> q <span class="keyword">and</span> dp[q[-<span class="number">1</span>]]&lt;dp[i]:</span><br><span class="line">            q.pop()</span><br><span class="line">        q.append(i)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">max</span>(dp))</span><br></pre></td></tr></table></figure>

</div><div class="tags"></div><div class="post-nav"><a class="next" href="/2024/03/06/ruoyi%E9%83%A8%E7%BD%B2/">ruoyi部署</a></div><div id="container"></div><link rel="stylesheet" type="text/css" href="//unpkg.com/gitalk/dist/gitalk.css?v=0.0.0"><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=0.0.0"></script><script type="text/javascript" src="//unpkg.com/gitalk/dist/gitalk.min.js?v=0.0.0"></script><script>var gitalk = new Gitalk({
  clientID: 'd154fff64901622afbb6',
  clientSecret: '5b3f1d58c331b54703e4477e1f8fa1e42e9c1082',
  repo: 'Disda-coding.github.io',
  owner: 'Disda-coding',
  admin: ['Disda-coding'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://disda-coding.github.io"/></form></div><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="https://disda-coding.github.io"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ctf/">ctf</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/design-pattern/">design pattern</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/log/">log</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/pandas/">pandas</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E8%80%83%E7%82%B9/">分布式考点</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%BA%90%E7%A0%81/">源码</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%A2%E7%BB%8F/">面经</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a><span class="category-list-count">19</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/%E9%98%BF%E9%87%8C%E9%9D%A2%E8%AF%95/" style="font-size: 15px;">阿里面试</a> <a href="/tags/ctf/" style="font-size: 15px;">ctf</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 15px;">设计模式</a> <a href="/tags/Algorithm/" style="font-size: 15px;">Algorithm</a> <a href="/tags/%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%80%83%E7%AE%97%E6%B3%95%E9%A2%98/" style="font-size: 15px;">面试常考算法题</a> <a href="/tags/Java%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 15px;">Java虚拟机</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/Java%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%BA%93%E4%B8%8E%E6%8A%80%E5%B7%A7/" style="font-size: 15px;">Java常用类库与技巧</a> <a href="/tags/LeetCode%EF%BC%8C%E7%AE%97%E6%B3%95/" style="font-size: 15px;">LeetCode，算法</a> <a href="/tags/HashMap/" style="font-size: 15px;">HashMap</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">机器学习</a> <a href="/tags/%E9%93%BE%E8%A1%A8/" style="font-size: 15px;">链表</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 15px;">计算机网络</a> <a href="/tags/%E5%AE%9E%E4%B9%A0/" style="font-size: 15px;">实习</a> <a href="/tags/%E6%BA%90%E7%A0%81/" style="font-size: 15px;">源码</a> <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" style="font-size: 15px;">大数据</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/%E5%AE%9E%E4%B9%A0%E6%97%A5%E8%AE%B0/" style="font-size: 15px;">实习日记</a> <a href="/tags/SpringBoot/" style="font-size: 15px;">SpringBoot</a> <a href="/tags/Tencent/" style="font-size: 15px;">Tencent</a> <a href="/tags/%E6%A0%91/" style="font-size: 15px;">树</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 15px;">数据库</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/java%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 15px;">java多线程</a> <a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 15px;">动态规划</a> <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size: 15px;">中间件</a> <a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" style="font-size: 15px;">面试题</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 15px;">操作系统</a> <a href="/tags/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 15px;">Java多线程</a> <a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 15px;">项目</a> <a href="/tags/python-%E8%AF%8D%E4%BA%91-%E5%BE%AE%E4%BF%A1/" style="font-size: 15px;">python 词云 微信</a> <a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" style="font-size: 15px;">消息队列</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" style="font-size: 15px;">排序算法</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/%E5%89%91%E6%8C%87Offer/" style="font-size: 15px;">剑指Offer</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-%E5%A4%A7%E6%95%B0%E6%8D%AE-pandas/" style="font-size: 15px;">机器学习 大数据 pandas</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2025/05/14/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/">单调队列</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/03/06/ruoyi%E9%83%A8%E7%BD%B2/">ruoyi部署</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/02/20/Ansible/">Ansible</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/10/25/LeetCode-%E9%87%8D%E5%88%B7/">LeetCode 重刷</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/10/22/python%E5%A4%84%E7%90%86%E5%BE%AE%E4%BF%A1%E8%81%8A%E5%A4%A9%E8%AE%B0%E5%BD%95/">python处理微信聊天记录</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/07/20/kali/">kali</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/05/08/ctfshow-Crypto/">ctfshow-Crypto</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/04/19/ctfshow-Web%E7%AF%87/">ctfshow-Web篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/04/18/Buuoj/">Buuoj</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/04/13/ctf-b%E7%AB%99%E7%AC%94%E8%AE%B0/">ctf-b站笔记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://cyc2018.github.io/CS-Notes/#/README" title="CS-Note" target="_blank">CS-Note</a><ul></ul><a href="https://www.javadoop.com/" title="Java源码解析" target="_blank">Java源码解析</a><ul></ul><a href="https://github.com/Disda-coding/advanced-java" title="Java 工程师进阶知识完全扫盲" target="_blank">Java 工程师进阶知识完全扫盲</a><ul></ul><a href="https://github.com/Disda-coding/Java-concurrency" title="Java高并发" target="_blank">Java高并发</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 <a href="/." rel="nofollow">Disda.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> </a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Disda.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/2.0.4/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>